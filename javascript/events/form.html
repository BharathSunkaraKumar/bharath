<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>form</title>
    <style>
        .formDiv{
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 10px;
            margin: 10px;
        }
        .form{
            display: flex;
            flex-direction: column;
            align-items: left;
            justify-content: space-around;
            margin: 10px;
        }
        .m{
            margin: 5px;
        }
    </style>
</head>
<body>
    <div class="formDiv">
        <form class="form">
            <div class="m">
                <label>Name(in caps)</label>
                <br/>
                <input  type="text" id="name" name="name" required/>
                <!-- onkeyup="nAme(event)" -->
            </div>
            <div class="m">
                <label>email</label>
                <br/>
                <input type="email" id="email" name="email" required/>
            </div>
            <div class="m">
                <label>year(must be in or after 2019)</label>
                <br/>
                <input type="date" id="dt" name="dt" required/>
            </div>
            <div class="m">
                <label>Email:</label>
            <input type="email" id="email2" name="email2"/>
            </div>
            <div class="m">
                <label>tel:</label>
            <input type="number" id="number" name="numer"/>
            </div>
            <div class="m">
                <label>paswword:</label>
                <input type="password" id="pwd" name="pwd" required/>
            </div>
            <div class="m">
                <label>password2:</label>
                <input type="password" id="password" name="password" required/>
            </div>
            
            <button type="submit" onclick="btn(event)">send</button>
        </form>
    </div>

    <script>
        var n = document.getElementById('name')
        var email = document.getElementById('email')
        let emailPattern = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
        var dt = document.getElementById('dt')
        var email2 = document.getElementById('email2')
        var number = document.getElementById('number')
        var pwd = document.getElementById('pwd')
        var password = document.getElementById('password')
        const btn = ((e) => {
            console.log( "n.value"+n.value)
            var upn 
            if(n.value !== n.value.toUpperCase()) {
                n.setCustomValidity('please input your name in caps')
                n.style.border='2px solid red';
                n.style.outline = 'none'
            }else{
                n.style.border='1px solid black';
                n.style.outline = 'none'
                upn = true
            }
            var passwordmatch
            console.log(password.value)
            console.log(pwd.value)
            if(password.value != pwd.value) {
                password.setCustomValidity('The password confirmation is different to the password value')
                password.style.border='2px solid red';
                password.style.outline = 'none'
            }else{
                password.style.border='2px solid black';
                password.style.outline = 'none'
                passwordmatch = true

            }
            var emailMAtch 
            if(!emailPattern.test(email.value)) {
                email.style.border='2px solid red';
                email.style.outline = 'none'
            }else{
                email.style.border='2px solid black';
                email.style.outline = 'none'
                emailMAtch = true
            }

            var d = dt.value
            var dObj = new Date(d)
            var year = dObj.getFullYear()
            console.log(year)

            var dateMatch 
            if(year<2019) {
                dt.setCustomValidity('year must after 2019')
                dt.style.border='2px solid red';
                dt.style.outline = 'none'
            }else{
                dt.style.border='2px solid black';
                dt.style.outline = 'none'
                dateMatch = true
            }

            if(upn && passwordmatch && dateMatch && emailMAtch) {
                e.preventDefault()
            }
            
            // if(upn  && year>2019 && password.value.length>0 && email.value.length>0 && password.value ==pwd.value) {
            //     e.preventDefault()
            // }
        })
    </script>
</body>
</html>